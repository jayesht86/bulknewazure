Planning failed. Terraform encountered an error while generating this plan.

╷
│ Error: Duplicate object key
│
│   on locals.tf line 159, in locals:
│  159:   disk_attachments2 = var.managed_disk != null ? { for o in local.disk_attachments : "${o.vm} + ${o.disk}" => o } : {}
│     ├────────────────
│     │ o.disk is "ddsk-01-eu1pcd1-011"
│     │ o.vm is "eu1pcd1-011"
│
│ Two different items produced the key "eu1pcd1-011 + ddsk-01-eu1pcd1-011" in this 'for' expression. If        
│ duplicates are expected, use the ellipsis (...) after the value expression to enable grouping by key.        
╵
╷
│ Error: Duplicate object key
│
│   on module-nic.tf line 4, in module "nic":
│    4:   for_each = { for obj in local.vm_list : obj.name => obj }
│     ├────────────────
│     │ obj.name is "eu1pcd1-011"
│
│ Two different items produced the key "eu1pcd1-011" in this 'for' expression. If duplicates are expected, use 
│ the ellipsis (...) after the value expression to enable grouping by key.
╵
╷
│ Error: Duplicate object key
│
│   on .terraform\modules\compute-managed_disk\main.tf line 10, in resource "azurerm_managed_disk" "managed_disk":
│   10:   for_each = var.managed_disk != null ? { for obj in var.managed_disk : obj.managed_disk_name => obj } : {}
│     ├────────────────
│     │ obj.managed_disk_name is "ddsk-01-eu1pcd1-011"
│
│ Two different items produced the key "ddsk-01-eu1pcd1-011" in this 'for' expression. If duplicates are       
│ expected, use the ellipsis (...) after the value expression to enable grouping by key.


Error: Invalid reference
│
│   on locals.tf line 176, in locals:
│  176:         managed_disk_size_gb     = var.managed_disk.managed_disks_list != null ? (length(var.managed_di╷
│ Error: Invalid reference
│
│   on locals.tf line 176, in locals:
│  176:         managed_disk_size_gb     = var.managed_disk.managed_disks_list != null ? (length(var.managed_di│ Error: Invalid reference
│
│   on locals.tf line 176, in locals:
│  176:         managed_disk_size_gb     = var.managed_disk.managed_disks_list != null ? (length(var.managed_disk.managed_disks_list) > 0 ? var.managed_disk.managed_disks_list[count_idx] : 128) : 128
│
│ A reference to a resource type must be followed by at least one attribute access, specifying the resource    
│   on locals.tf line 176, in locals:
│  176:         managed_disk_size_gb     = var.managed_disk.managed_disks_list != null ? (length(var.managed_disk.managed_disks_list) > 0 ? var.managed_disk.managed_disks_list[count_idx] : 128) : 128
│
│ A reference to a resource type must be followed by at least one attribute access, specifying the resource    
sk.managed_disks_list) > 0 ? var.managed_disk.managed_disks_list[count_idx] : 128) : 128
│
│ A reference to a resource type must be followed by at least one attribute access, specifying the resource    
│ A reference to a resource type must be followed by at least one attribute access, specifying the resource    
│ name.
│ name.
╵
╵
