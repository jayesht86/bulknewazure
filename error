│ Error: Invalid for_each argument
│
│   on main-disk-attachment.tf line 2, in resource "azurerm_virtual_machine_data_disk_attachment" "disk_attachment":
│    2:   for_each = local.disk_attachments2
│     ├────────────────
│     │ local.disk_attachments2 will be known only after apply
│
│ The "for_each" map includes keys derived from resource attributes that cannot be determined until apply, and 
│ so Terraform cannot determine the full set of keys that will identify the instances of this resource.        
│
│ When working with unknown values in for_each, it's better to define the map keys statically in your
│ configuration and place apply-time results only in the map values.
│
│ Alternatively, you could use the -target planning option to first apply only the resources that the for_each 
│ value depends on, and then apply a second time to fully converge.
